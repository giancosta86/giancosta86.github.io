!function(){var t={7117:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IsoDate=void 0;e.IsoDate=class{constructor(t){const[e,o,n]=t.split("-").map(Number);try{if(!e||!o||!n)throw new Error;if(this.unboxed=new Date(e,o-1,n),this.unboxed.getFullYear()!=e||this.unboxed.getMonth()!=o-1||this.unboxed.getDate()!=n)throw new Error}catch(r){throw new Error(`Invalid date string: '${t}'`)}}}},1786:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareSubjects=e.Subject=void 0;const n=o(9755);class r{constructor(t,e){if(this.name=t,this.items=e,!t)throw new Error("Empty subject name");if(!e.length)throw new Error(`Cannot create subject '${t}' with no items`);this.totalMinutes=e.reduce(((t,e)=>t+e.totalMinutes),0),this.containsSubjects=e[0]instanceof r,this.containsSubjects||function(t){const e=new Set;for(const o of t){if(e.has(o.key))throw new Error(`Duplicate work: '${o.title}'`);e.add(o.key)}}(e)}}e.Subject=r,e.compareSubjects=function(t,e){const o=e.totalMinutes-t.totalMinutes;return o||t.name.localeCompare(e.name,n.defaultLocale)}},4743:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Taxonomy=void 0;e.Taxonomy=class{constructor(t,e){if(this.name=t,this.items=e,this.containsSubjects=!0,!t)throw new Error("Empty taxonomy name");if(!e.length)throw new Error(`Cannot create taxonomy '${t}' with no subjects`);this.totalMinutes=e.reduce(((t,e)=>t+e.totalMinutes),0)}}},4653:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareWorks=e.Work=void 0;const n=o(9755);e.Work=class{constructor(t,e,o){if(this.title=t,this.totalMinutes=e,!t)throw new Error("Empty work title");if(e<=0)throw new Error(`Invalid total minutes for work '${t}'`);this.completionDate=null===o||void 0===o?void 0:o.completionDate,this.kind=null===o||void 0===o?void 0:o.kind,this.url=null===o||void 0===o?void 0:o.url,this.certificateUrl=null===o||void 0===o?void 0:o.certificateUrl,this.key=this.completionDate?`${t} # ${this.completionDate.unboxed.getTime()} # ${e}`:t}},e.compareWorks=function(t,e){if(!t.completionDate||!e.completionDate){if(e.completionDate)return-1;if(t.completionDate)return 1;const o=e.totalMinutes-t.totalMinutes;return o||t.title.localeCompare(e.title,n.defaultLocale)}const o=e.completionDate.unboxed.getTime()-t.completionDate.unboxed.getTime();return o||t.title.localeCompare(e.title,n.defaultLocale)}},9755:function(t,e){"use strict";function o(t){return`${t} hour${1==t?"":"s"}`}function n(t){return`${t} minute${1==t?"":"s"}`}Object.defineProperty(e,"__esModule",{value:!0}),e.formatError=e.formatDate=e.formatDuration=e.defaultLocale=void 0,e.defaultLocale="en",e.formatDuration=function(t){if(t<0)throw new Error(`Invalid total minutes: ${t}`);const e=Math.floor(t/60),r=t%60;return e?r?`${o(e)}, ${n(r)}`:o(e):n(r)},e.formatDate=function(t){return t.unboxed.toLocaleString(e.defaultLocale,{day:"numeric",month:"long",year:"numeric"})},e.formatError=function(t){return t instanceof Error?t.message:String(t)}},5981:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toTaxonomy=void 0;const n=o(4743),r=o(1786),i=o(7117),a=o(4653);function s(t){return Object.entries(t).flatMap((([t,e])=>{const o=function(t,e){const o=e instanceof Array?(n=e,n.map(c).sort(a.compareWorks)):s(e);var n;return o.length?new r.Subject(t,o):null}(t,e);return o?[o]:[]})).sort(r.compareSubjects)}function c(t){if(null==t.title)throw new Error(`Missing work title: ${JSON.stringify(t)}`);const e=String(t.title);if(null==t.minutes)throw new Error(`Missing 'minutes' field in work '${e}'`);const o=Math.round(Number(t.minutes));if(isNaN(o))throw new Error(`'minutes' field in work '${e}' is not a number`);const n=t.completionDate?new i.IsoDate(String(t.completionDate)):void 0;return new a.Work(e,o,{kind:t.kind?String(t.kind):void 0,completionDate:n,url:t.url?String(t.url):void 0,certificateUrl:t.certificateUrl?String(t.certificateUrl):void 0})}e.toTaxonomy=function(t,e){const o=s(e);return new n.Taxonomy(t,o)}}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}},a=!0;try{t[n](i,i.exports,o),a=!1}finally{a&&delete e[n]}return i.exports}var n={};!function(){"use strict";const t=o(5981);self.addEventListener("message",(e=>{const o=e.data;"computeTaxonomy"!==o.type||function({correlationId:e,taxonomyName:o,rawTaxonomy:n}){try{const r={type:"taxonomyReady",correlationId:e,taxonomy:(0,t.toTaxonomy)(o,n)};self.postMessage(r)}catch(r){const t={type:"taxonomyError",correlationId:e,errorMessage:r instanceof Error?r.message:String(r)};self.postMessage(t)}}(o)}))}(),_N_E=n}();